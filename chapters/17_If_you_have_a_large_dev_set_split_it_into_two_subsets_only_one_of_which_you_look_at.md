## 17 If you have a large dev set, split it into two subsets, only one of which you look at

개발 데이터셋으로 20%의 에러율을 보이는 5,000개의 예제 데이터가 있다고 가정해 보자. 그러면, 개발된 알고리즘은 약 1,000개의 이미지를 잘못 분류할 것으로 추정된다. 이 1,000개의 이미지를 수작업으로 일일이 확인하는데는 시간이 오래 걸리므로, 에러 분석에 1,000개 모두를 사용하지 않는 다는 결정을 내릴 지도 모른다. 

이 경우에, 나는 개발 데이터 셋을 명시적으로 두 개의 부분 집합으로 분리해 내곤한다. 그 중 하나는 관찰 해야하는 대상이고, 나머지 하나는 분석하지 않을 데이터이다. 수작업으로 관찰하는 특정 부분(전자)에 대하여, 빠르게 과적합화 될 것이다. 그러면, 나머지 관찰하지 않는 부분(후자)로는 파라메터 튜닝을 할 수 있을 것이다.

<div style="text-align=center">
  <img src="../img/17_1.PNG"/>
</div>

앞서 사용한 (5,000개의 개발 데이터셋 중 1,000개를 잘못 분류하는 알고리즘)예를 계속해서 사용해 보자. 여기서, 에러 분석을 위해서 10%의 에러에 해당하는 100개의 에러 케이스를 수작업으로 일일이 관찰하길 원한다고 가정해 보자. 이때, 개발 데이터셋의 10%는 반드시 무작위로 선정 되어야 하고, 선택된 데이터는 눈알(Eyeball) 개발 데이터셋이라고 부르는 집합에 넣어져야 한다. 눈알 개발 데이터셋이라고 부르는 이유는, 실제로 우리의 눈을 가지고 관찰되어야 하는 데이터임을 우리 스스로에게 상기시키기 위함이다 (음성 분석에서는, 종종 이를 "귀" 개발 데이터셋 이라고 부르기도 한다). 이렇게 해서 눈알 개발 데이터셋은 500개의 데이터를 가지게 되고, 우리가 개발한 알고리즘이 이 500개의 데이터에 대해서는 100% 잘못 분류하는 결과를 가져옴을 기대할 수 있다.

개발 데이터셋에서 분리되어 나온 두번째 부분 집합은 블랙박스 개발 데이터셋이라고도 불리는데, 이 데이터셋은 나머지 4,500개의 데이터를 가지게 된다. 이 블랙박스 개발 데이터셋을 사용해서 분류 알고리즘들의 에러율을 측정하여, 자동으로 각 알고리즘들을 평가하는데 사용할 수 있다. 또한, 여러개의 알고리즘들 중에서 하나를 선택하거나, 하이퍼파라메터의 값을 튜닝하기 위한 용도로도 사용될 수 있겠다. 하지만, 실제로 이 데이터를 직접 들여다 보는 것은 피해야만 한다. "블랙박스" 라는 용어를 사용한 이유는 "블랙박스"를 통해서 분류 알고리즘들의 평가를 얻기위한 데이터로서 사용되는 데이터로 구성되기 때문이다.

<div style="text-align=center">
  <img src="../img/17_2.PNG"/>
</div>

왜 명시적으로 전체 개발 데이터셋을 "눈알"과 "블랙박스" 개발 데이터셋으로 분리해야만 할까? "눈알" 개발 데이터은 그 속의 예제 데이터에 대한 어떤 직감적인 무언가를 느낄 수 있기 때문에, 이 데이터셋에 대하여 더 빠르게 과적합이 시작될 수 있다. 만약 "눈알" 개발 데이터셋에 대한 성능 향상이, "블랙박스" 개발 데이터셋에 대한 성능 향상보다 빠르게 일어나는 것을 눈치 챈다면, "눈알" 개발 데이터셋에 대하여 과적합 되었음을 의미한다. 이 경우에는, 기존의 "눈알" 개발 데이터셋을 버리고, "블랙박스" 개발 데이터셋으로 부터 더 많은 데이터를 가져와서 새로운 "눈알" 개발 데이터셋을 구성할 필요가 있다. (또는 완전히 새로운 데이터를 얻어 보는 방법이 있겠다)

명시적으로 전체 개발 데이터셋을 "눈알"과 "블랙박스" 개발 데이터셋으로 분리하는 것으로, 수작업으로 진행되는 에러 분석 과정이 "눈알" 데이터셋의 부분에 대하여 과적합을 유발하는지를 알 수 있게 된다.